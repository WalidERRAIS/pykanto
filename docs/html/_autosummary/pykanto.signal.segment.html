<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pykanto.signal.segment &mdash; pykanto 0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="pykanto.signal.spectrogram" href="pykanto.signal.spectrogram.html" />
    <link rel="prev" title="pykanto.signal.filter" href="pykanto.signal.filter.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/pykanto-logo-white-03.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contents/dataset_class.html">SongDataset API Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contents/dataset.html">Creating a SongDataset object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contents/paths.html">Working with paths and directories</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contents/hpc.html">Pykanto and High Performance Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contents/segmentation.html">Vocalisation segmentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="pykanto.parameters.html">pykanto.parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="pykanto.dataset.html">pykanto.dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="pykanto.intlabel.html">pykanto.intlabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="pykanto.plot.html">pykanto.plot</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="pykanto.signal.html">pykanto.signal</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="pykanto.signal.cluster.html">pykanto.signal.cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="pykanto.signal.filter.html">pykanto.signal.filter</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">pykanto.signal.segment</a></li>
<li class="toctree-l2"><a class="reference internal" href="pykanto.signal.spectrogram.html">pykanto.signal.spectrogram</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pykanto.utils.html">pykanto.utils</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
    <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
    <img src="../_static/pykanto-logo-white-03.svg" class="mobile-logo" alt="Logo" />
    
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="pykanto.signal.html">pykanto.signal</a> &raquo;</li>
      <li>pykanto.signal.segment</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_autosummary/pykanto.signal.segment.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-pykanto.signal.segment">
<span id="pykanto-signal-segment"></span><h1>pykanto.signal.segment<a class="headerlink" href="#module-pykanto.signal.segment" title="Permalink to this headline"></a></h1>
<p class="rubric">Functions</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pykanto.signal.segment.batch_segment_songs" title="pykanto.signal.segment.batch_segment_songs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">batch_segment_songs</span></code></a>(origin, DATA_DIR, DT_ID, ...)</p></td>
<td><p>Extracts all sound segments found in a folder/subfolders.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pykanto.signal.segment.batch_segment_songs_single" title="pykanto.signal.segment.batch_segment_songs_single"><code class="xref py py-obj docutils literal notranslate"><span class="pre">batch_segment_songs_single</span></code></a>(origin, DATA_DIR, ...)</p></td>
<td><p>Extracts all sound segments found in a folder/subfolders.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pykanto.signal.segment.find_units" title="pykanto.signal.segment.find_units"><code class="xref py py-obj docutils literal notranslate"><span class="pre">find_units</span></code></a>(dataset, spectrogram)</p></td>
<td><p>Segment a given spectrogram array into its units.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pykanto.signal.segment.get_segment_info" title="pykanto.signal.segment.get_segment_info"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_segment_info</span></code></a>(ORIGIN_DIR, min_duration, ...)</p></td>
<td><p>Get a summary of all segments present in a directory. Works for .xml files</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pykanto.signal.segment.onsets_offsets" title="pykanto.signal.segment.onsets_offsets"><code class="xref py py-obj docutils literal notranslate"><span class="pre">onsets_offsets</span></code></a>(signal)</p></td>
<td><p>[summary]</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pykanto.signal.segment.save_segment" title="pykanto.signal.segment.save_segment"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_segment</span></code></a>(segment, WAV_FILEDIR, OUT_DIR, ...)</p></td>
<td><p>Save wav and json files for a single song segment present in WAV_FILEDIR</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pykanto.signal.segment.segment_into_songs" title="pykanto.signal.segment.segment_into_songs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">segment_into_songs</span></code></a>(DATA_DIR, WAV_FILEDIR, ...)</p></td>
<td><p>Segments long .wav files recorderd with AudioMoth units into shorter segments, using segmentation metadata from .xml files output by Sonic Visualiser.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pykanto.signal.segment.segment_song_into_units" title="pykanto.signal.segment.segment_song_into_units"><code class="xref py py-obj docutils literal notranslate"><span class="pre">segment_song_into_units</span></code></a>(dataset, key)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pykanto.signal.segment.segment_song_into_units_parallel" title="pykanto.signal.segment.segment_song_into_units_parallel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">segment_song_into_units_parallel</span></code></a>(dataset, ...)</p></td>
<td><p>See save_melspectrogram</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pykanto.signal.segment.segment_songs" title="pykanto.signal.segment.segment_songs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">segment_songs</span></code></a>(wavfile, DATA_DIR, DT_ID, ...)</p></td>
<td><p>Takes onset/offset times for a .wav files and saves individual .wav files for each segment, as well as a .json file with the relevant metadata.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="pykanto.signal.segment.segment_songs">
<span class="sig-prename descclassname"><span class="pre">pykanto.signal.segment.</span></span><span class="sig-name descname"><span class="pre">segment_songs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wavfile</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DATA_DIR</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DT_ID</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">RAW_DATA_ID</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'GRETI_HQ'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/signal/segment.html#segment_songs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.signal.segment.segment_songs" title="Permalink to this definition"></a></dt>
<dd><p>Takes onset/offset times for a .wav files and saves
individual .wav files for each segment, as well as a .json file
with the relevant metadata. Reads .data files generated by AviaNZ,
which are assumed to be in the same folder as the ‘wavfile’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wavfile</strong> (<em>Path</em>) – path to the source.wav file</p></li>
<li><p><strong>DATA_DIR</strong> (<em>Path</em>) – Path to higher-level data folder</p></li>
<li><p><strong>DT_ID</strong> (<em>str</em>) – Identifier for dataset (“%Y-%m-%d_%H-%M-%S”)</p></li>
<li><p><strong>RAW_DATA_ID</strong> (<em>str</em>) – Label to export. Defaults to “GRETI_HQ”.</p></li>
<li><p><strong>subset</strong> (<em>str</em><em>, </em><em>optional</em>) – Label of desired subset. Defaults to “GRETI_HQ”.</p></li>
<li><p><strong>threshold</strong> (<em>int</em><em>, </em><em>optional</em>) – Minimum amplitude of segment. Defaults to 0.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pykanto.signal.segment.batch_segment_songs_single">
<span class="sig-prename descclassname"><span class="pre">pykanto.signal.segment.</span></span><span class="sig-name descname"><span class="pre">batch_segment_songs_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DATA_DIR</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DT_ID</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">RAW_DATA_ID</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'GRETI_HQ'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/signal/segment.html#batch_segment_songs_single"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.signal.segment.batch_segment_songs_single" title="Permalink to this definition"></a></dt>
<dd><p>Extracts all sound segments found in a folder/subfolders.
Based on code by Stephen Marsland, Nirosha Priyadarshani &amp; Julius Juodakis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>origin</strong> (<em>Path</em>) – folder with raw data to be segmented</p></li>
<li><p><strong>DATA_DIR</strong> (<em>Path</em>) – Path to higher-level data folder</p></li>
<li><p><strong>DT_ID</strong> (<em>str</em>) – Identifier for dataset (“%Y-%m-%d_%H-%M-%S”)</p></li>
<li><p><strong>subset</strong> (<em>str</em><em>, </em><em>optional</em>) – Label to export. Defaults to “GRETI_HQ”</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pykanto.signal.segment.batch_segment_songs">
<span class="sig-prename descclassname"><span class="pre">pykanto.signal.segment.</span></span><span class="sig-name descname"><span class="pre">batch_segment_songs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DATA_DIR</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DT_ID</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">RAW_DATA_ID</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'GRETI_HQ'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/signal/segment.html#batch_segment_songs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.signal.segment.batch_segment_songs" title="Permalink to this definition"></a></dt>
<dd><p>Extracts all sound segments found in a folder/subfolders. Uses multiprocessing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>origin</strong> (<em>Path</em>) – folder with raw data to be segmented</p></li>
<li><p><strong>DATA_DIR</strong> (<em>Path</em>) – Path to higher-level data folder</p></li>
<li><p><strong>DT_ID</strong> (<em>str</em>) – Identifier for dataset (“%Y-%m-%d_%H-%M-%S”)</p></li>
<li><p><strong>subset</strong> (<em>str</em><em>, </em><em>optional</em>) – Label to export. Defaults to “GRETI_HQ”</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pykanto.signal.segment.get_segment_info">
<span class="sig-prename descclassname"><span class="pre">pykanto.signal.segment.</span></span><span class="sig-name descname"><span class="pre">get_segment_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ORIGIN_DIR</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_duration</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_freqrange</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_labels</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">['FIRST',</span> <span class="pre">'first']</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pykanto/signal/segment.html#get_segment_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.signal.segment.get_segment_info" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>Get a summary of all segments present in a directory. Works for .xml files</dt><dd><p>output by Sonic Visualiser.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ORIGIN_DIR</strong> (<em>Path</em>) – Folder to check, normally DATA_DIR / “raw” / YEAR</p></li>
<li><p><strong>min_duration</strong> (<em>float</em>) – Minimum duration for a segment to be
considered (in seconds)</p></li>
<li><p><strong>min_freqrange</strong> (<em>int</em>) – Minimum frequency range for a segment to be
considered (in hertz)</p></li>
<li><p><strong>ignore_labels</strong> (<em>List</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – Ignore segments with these labels.
Defaults to [“FIRST”, “first”].</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Lists of segment durations, in seconds</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[str, List[float]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pykanto.signal.segment.segment_into_songs">
<span class="sig-prename descclassname"><span class="pre">pykanto.signal.segment.</span></span><span class="sig-name descname"><span class="pre">segment_into_songs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">DATA_DIR</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">WAV_FILEDIR</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">RAW_DATA_ID</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_duration</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_freqrange</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">species</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'Big</span> <span class="pre">Bird'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_labels</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">['FIRST',</span> <span class="pre">'first']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resample</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">22050</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/signal/segment.html#segment_into_songs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.signal.segment.segment_into_songs" title="Permalink to this definition"></a></dt>
<dd><p>Segments long .wav files recorderd with AudioMoth units into shorter
segments, using segmentation metadata from .xml files output by
Sonic Visualiser. Works well with large files (only reads one chunk at a
time).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>.xml files should be in the same folder as the .wav files.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>DATA_DIR</strong> (<em>Path</em>) – Directory where to output files (will create subfolders).</p></li>
<li><p><strong>WAV_FILEDIR</strong> (<em>Path</em>) – Path to wav file.</p></li>
<li><p><strong>RAW_DATA_ID</strong> (<em>str</em>) – Name of dataset.</p></li>
<li><p><strong>min_duration</strong> (<em>float</em><em>, </em><em>optional</em>) – Minimum duration for a segment to be
considered (in seconds). Defaults to .5.</p></li>
<li><p><strong>min_freqrange</strong> (<em>int</em><em>, </em><em>optional</em>) – Minimum frequency range for a segment to be
considered (in hertz). Defaults to 200.</p></li>
<li><p><strong>species</strong> (<em>str</em><em>, </em><em>optional</em>) – Species name. Defaults to “Big Bird”.</p></li>
<li><p><strong>ignore_labels</strong> (<em>List</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – Ignore segments with these labels.
Defaults to [“FIRST”, “first”].</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>Exception</strong> – Will raise an exception if sample rates in the file and the</p></li>
<li><p><strong>metadata do not coincide. You should check why.</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pykanto.signal.segment.save_segment">
<span class="sig-prename descclassname"><span class="pre">pykanto.signal.segment.</span></span><span class="sig-name descname"><span class="pre">save_segment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">segment</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">object</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">WAV_FILEDIR</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">OUT_DIR</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">species</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sr</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wavfile</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">sf.SoundFile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cnt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resample</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">22050</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/signal/segment.html#save_segment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.signal.segment.save_segment" title="Permalink to this definition"></a></dt>
<dd><p>Save wav and json files for a single song segment present in WAV_FILEDIR</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>segment</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>object</em><em>]</em>) – [description]</p></li>
<li><p><strong>WAV_FILEDIR</strong> (<em>Path</em>) – [description]</p></li>
<li><p><strong>OUT_DIR</strong> (<em>Path</em>) – [description]</p></li>
<li><p><strong>species</strong> (<em>str</em>) – [description]</p></li>
<li><p><strong>sr</strong> (<em>int</em>) – [description]</p></li>
<li><p><strong>wavfile</strong> (<em>sf.SoundFile</em>) – [description]</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – [description]</p></li>
<li><p><strong>cnt</strong> (<em>int</em>) – [description]</p></li>
<li><p><strong>resample</strong> (<em>int</em><em>, </em><em>optional</em>) – [description]. Defaults to 22050.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pykanto.signal.segment.find_units">
<span class="sig-prename descclassname"><span class="pre">pykanto.signal.segment.</span></span><span class="sig-name descname"><span class="pre">find_units</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">SongDataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectrogram</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">np.ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">np.ndarray</span><span class="p"><span class="pre">,</span> </span><span class="pre">np.ndarray</span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/signal/segment.html#find_units"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.signal.segment.find_units" title="Permalink to this definition"></a></dt>
<dd><p>Segment a given spectrogram array into its units. For convenience,
parameters are defined in a SongDataset class instance (class Parameters).
Based on Tim Sainburg’s
<a class="reference external" href="https://github.com/timsainb/vocalization-segmentation/">vocalseg</a> code.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Tuple(onsets, offsets)
None: Did not find any units matching given criteria.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Tuple[np.ndarray, np.ndarray]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pykanto.signal.segment.onsets_offsets">
<span class="sig-prename descclassname"><span class="pre">pykanto.signal.segment.</span></span><span class="sig-name descname"><span class="pre">onsets_offsets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pykanto/signal/segment.html#onsets_offsets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.signal.segment.onsets_offsets" title="Permalink to this definition"></a></dt>
<dd><p>[summary]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>[</strong><strong>description</strong><strong>]</strong> (<em>signal {</em><em>[</em><em>type</em><em>]</em><em>} --</em>) – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>[type] – [description]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pykanto.signal.segment.segment_song_into_units">
<span class="sig-prename descclassname"><span class="pre">pykanto.signal.segment.</span></span><span class="sig-name descname"><span class="pre">segment_song_into_units</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">SongDataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">np.ndarray</span><span class="p"><span class="pre">,</span> </span><span class="pre">np.ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pykanto/signal/segment.html#segment_song_into_units"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.signal.segment.segment_song_into_units" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pykanto.signal.segment.segment_song_into_units_parallel">
<span class="sig-prename descclassname"><span class="pre">pykanto.signal.segment.</span></span><span class="sig-name descname"><span class="pre">segment_song_into_units_parallel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">SongDataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">np.ndarray</span><span class="p"><span class="pre">,</span> </span><span class="pre">np.ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pykanto/signal/segment.html#segment_song_into_units_parallel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.signal.segment.segment_song_into_units_parallel" title="Permalink to this definition"></a></dt>
<dd><p>See save_melspectrogram</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer>
    
    <div class="rst-footer-buttons" role="navigation" aria-label="footer
        navigation">
        
        <a href="pykanto.signal.spectrogram.html" class="btn btn-neutral float-right"
            title="pykanto.signal.spectrogram" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
        
        
        <a href="pykanto.signal.filter.html" class="btn btn-neutral float-left" title="pykanto.signal.filter" accesskey="p" rel="prev"><span class="fa
                fa-arrow-circle-left"></span> Previous</a>
        
    </div>
    

    <hr/>

        <div role="contentinfo">
            <p>
                
                &copy;  2021, Nilo M. Recalde

            </p>
        </div>
        
        
        
        
        Uses
        <a href="https://www.sphinx-doc.org/">Sphinx</a> and a 
        theme
        
         modified from <a href="https://readthedocs.org">Read the
            Docs</a>.

    </footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>